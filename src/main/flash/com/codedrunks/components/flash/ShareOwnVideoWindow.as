package com.codedrunks.components.flash{	import flash.display.MovieClip;	import flash.events.TimerEvent;	import flash.utils.Timer;	import com.codedrunks.socnet.events.SocnetAPIEvent;	import flash.events.MouseEvent;	public class ShareOwnVideoWindow extends MovieClip	{		private var view:MissionArmy;		private var shareVideoWindow:ShareVideoWindow;		private var shareTimer:Timer = new Timer(4000);				public function ShareOwnVideoWindow(view:MissionArmy)		{			this.view = view;		}				public function showWindow():void		{			shareVideoWindow = new ShareVideoWindow();			view.stage.addChild(shareVideoWindow);			shareVideoWindow.whatOnMind_txtInput.addEventListener(MouseEvent.MOUSE_DOWN,handleMouseDownWhatMind);			//var shareProPic:shareProfilePic = new shareProfilePic();						shareVideoWindow.whatOnMind_txtInput.text ="What's On your mind ?";			shareVideoWindow.successMsg.text = "";			shareVideoWindow.shareProfilePic.profilePic.addChild(view.image);						shareVideoWindow.wallPostBtn.addEventListener(MouseEvent.CLICK,handleAddToFacebookBtnClick);			shareVideoWindow.cancelFacebookWallBtn.addEventListener(MouseEvent.CLICK,handleCancelFacebookWallBtnClicked);		}				private function handleMouseDownWhatMind(event:MouseEvent):void		{			shareVideoWindow.whatOnMind_txtInput.text ="";		}				private function handleCancelFacebookWallBtnClicked(event:MouseEvent):void		{			view.profileMc.profilePicLoader.addChild(view.image);			view.stage.removeChild(shareVideoWindow);		}				private function handleAddToFacebookBtnClick(event:MouseEvent):void		{			var onMindTxt:String = shareVideoWindow.whatOnMind_txtInput.text;			if(onMindTxt == "" || onMindTxt == "What's On your mind ?")			{				onMindTxt = "I just made a video for Idea Presents Nat Geo Mission Army! Check it out. Pretty cool huh?";			}			else			{				onMindTxt = shareVideoWindow.whatOnMind_txtInput.text;			}						var media:Object = {};			media.type = "flash";			media.swfsrc = "http://apptikka.com/natgeoindia/fb/missionarmy/canvas/Container.swf?mode=blog&userName="+ view.fbUserName + "&userPicture=" + view.fbUserPicture + "&videoPath=" + view.videoPath;			media.imgsrc = "http://apptikka.com/natgeoindia/fb/missionarmy/canvas/assets/images/fb_wall_cover.png";			media.width = "132";			media.height = "100";			media.expanded_width = "460";			media.expanded_height = "460";						var attachmentVO:Object = {};			attachmentVO.name = "Idea Presents Nat Geo Mission Army";			attachmentVO.href = "http://apps.facebook.com/natgeoindia/";			attachmentVO.caption = "Mission Army";			attachmentVO.description = "Hey check out my Nat Geo Mission Army video! Idea Presents Nat Geo Mission gives five ordinary Indians, chosen by the Indian Army from a list of almost 40,000 probables, a chance to live the life of an Indian soldier. And only one of them will be part of an Indian military training team abroad.";			attachmentVO.media = [media];						var actionLinks:Array = [{"text":"Mission Army","href":"http://apps.facebook.com/natgeoindia/"}];						trace("kichcha --> attachment vo check",attachmentVO.name,attachmentVO.media,attachmentVO.href);			view.socnetAPI.publishToFeed(onMindTxt,attachmentVO,actionLinks);						view.socnetAPI.addEventListener(SocnetAPIEvent.WALL_POST_SUCCESS,handleWallPostSuccess);			view.socnetAPI.addEventListener(SocnetAPIEvent.WALL_POST_FAIL,handleWallPostFail);		}				private function handleWallPostSuccess(event:SocnetAPIEvent):void		{			shareVideoWindow.successMsg.text = "Succesfully posted on your wall";			shareTimer.addEventListener(TimerEvent.TIMER,handleTimerComplete);			shareTimer.start();		}				private function handleWallPostFail(event:SocnetAPIEvent):void		{			shareVideoWindow.successMsg.text = "Posting Failed";			shareTimer.addEventListener(TimerEvent.TIMER,handleTimerComplete);			shareTimer.start();		}				private function handleTimerComplete(event:TimerEvent):void		{			shareTimer.stop();			view.stage.removeChild(shareVideoWindow);			view.resetMedia();			view.profileMc.profilePicLoader.addChild(view.image);			trace("Hello Timer Stoped");		}	}}